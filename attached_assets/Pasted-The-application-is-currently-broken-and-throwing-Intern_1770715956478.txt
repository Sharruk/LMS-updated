The application is currently broken and throwing "Internal Server Error" on ALL routes, including:

- /admin/dashboard
- /class/9
- public class pages
- after admin login

This error started AFTER role system changes.

GOAL:
Fix the Internal Server Error WITHOUT removing or breaking any existing functionality.

STRICT RULES:
- DO NOT remove:
  • File detail page
  • Download functionality
  • Direct URL access to files
- DO NOT redesign UI
- DO NOT change routing structure unless required to FIX the error
- DO NOT add new user roles

ROLE SYSTEM (FINAL & SIMPLE):
There are ONLY TWO ROLES.

1) Admin (ONLY ONE ACCOUNT – ME)
   - Full access
   - Upload PDFs
   - Add / Edit / Delete:
     • Class
     • Subject
     • Exam Type
     • Year
     • Files
   - Verify & publish papers
   - Moderate comments
   - Admin access via PRIVATE / SECRET route (example: /admin)
   - Admin routes MUST NOT be publicly accessible

2) User (EVERYONE ELSE – DEFAULT)
   - NO login required
   - View question papers
   - Search papers
   - Download PDFs
   - Like papers
   - Comment on papers
   - ABSOLUTELY NO upload, edit, delete, or verification permissions

IMPORTANT BEHAVIOR:
- Public users should behave like:
  Google → site → search question paper → click → download → exit
- Direct URL access to file download MUST WORK
- Admin is the ONLY person who can:
  • Open admin dashboard
  • Upload content
  • Modify anything

DEBUG & FIX STEPS YOU MUST DO:
1. Check server logs and console output.
2. Identify the EXACT cause of the Internal Server Error.
3. Fix:
   - Missing middleware
   - Broken role checks
   - Undefined variables
   - Incorrect imports
   - Auth guard issues
4. Ensure routes like /class/:id render correctly for PUBLIC users.
5. Ensure admin login works and redirects correctly to /admin/dashboard.
6. Add proper error handling so the server NEVER crashes silently again.

FINAL CHECK:
- Public pages load without login
- Admin dashboard loads only for admin
- No Internal Server Error anywhere
- App runs cleanly after restart

Do NOT respond with explanations.
JUST FIX THE APP.
